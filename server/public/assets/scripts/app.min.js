/*! week4_messageboard 2015-08-10 */
function getMessages(){$.ajax({type:"GET",url:"/things",success:function(a){updateMessages(a)}})}function updateMessages(a){$(".dataDiv").empty();for(var b=0;b<a.length;b++){$(".dataDiv").append('<div class="messageDiv"></div>');var c=$(".dataDiv").children().last();c.append("<hr>"),c.append("<h3>"+a[b].name+"</h3>"),c.append("<hr>"),c.append("<p>"+a[b].message+"</p>"),c.append("<hr>"),"http://localhost:5000/secret"==document.location.href&&c.append("<button data-id="+a[b]._id+">DELETE</button>")}}$(document).ready(function(){$("body").append('<button class="refresh">Refresh</button>'),$("#inputForm").submit(function(a){a.preventDefault();var b=$("#inputForm").serialize();console.log(b),$.ajax({type:"POST",url:"/things",data:b,success:function(a){console.log(a),getMessages()}})}),$(".dataDiv").on("click","button",function(){$.ajax({type:"DELETE",url:"/things/"+$(this).data("id"),success:function(){console.log("Hes dead Jim!")},error:function(){alert("Error: ",status)},complete:function(){console.log("Delete Complete!")}}),$(this).parent().remove()}),$("body").on("click",".refresh",function(){console.log("Refresh Clicked!"),getMessages()}),getMessages()});